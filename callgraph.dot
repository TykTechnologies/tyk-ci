digraph releng {
    node [ shape = circle ]; packagecloud ecr github dockerhub;

    node [ shape = octagon ]; templates ;
    node [ shape = doubleoctagon ]; gw_goreleaser dash_goreleaser pmp_goreleaser mdcb_goreleaser tib_goreleaser raava_goreleaser;

    node [ shape = box ];
    subgraph tyk {
	label = "Gateway";
	gw_goreleaser -> std_amd64_bin [ label="build" ];
	gw_goreleaser -> std_arm64_bin [ label="build" ];
	gw_goreleaser -> slim_amd64_bin [ label="build" ];
	gw_goreleaser -> darwin_amd64_bin [ label="build" ];

	std_amd64_bin -> arm64_rpm [ label = "nfpm" ];
	std_amd64_bin -> amd64_rpm [ label = "nfpm" ];
	std_amd64_bin -> arm64_deb [ label = "nfpm" ];
	std_amd64_bin -> amd64_deb [ label = "nfpm" ];

	slim_amd64_bin -> tarball [ label = "archives" ];
	darwin_amd64_bin -> tarball [ label = "archives" ];

	arm64_rpm -> packagecloud [ label = "gha"] ;
	arm64_deb -> packagecloud [ label = "gha"];
	amd64_rpm -> packagecloud [ label = "gha"];
	amd64_deb -> packagecloud [ label = "gha"];

	arm64_deb -> std_arm64_image [ label = "docker" ];
	amd64_deb -> std_amd64_image [ label = "docker" ];
	slim_amd64_bin -> slim_amd64_image [ label = "docker" ];

	std_arm64_image -> dockerhub [ label = "manifests" ];
	std_amd64_image -> dockerhub [ label = "manifests" ];
	std_amd64_image -> cloudsmith [ label = "docker" ];
	slim_amd64_image -> dockerhub [ label = "docker" ];

	std_amd64_image -> ecr [ label = "gha" ];

	tarball -> github [ label = "release" ];

	amd64_rpm -> rhel_ami [ label = "packer" ];
	amd64_rpm -> al2_ami [ label = "packer" ];
    }

    subgraph tyk_analytics {
	label = "Dashboard";
	dash_goreleaser -> std_amd64_bin [ label = "build" fontname = "Noto Sans" ];
	dash_goreleaser -> std_arm64_bin [ label = "build" ];
	dash_goreleaser -> slim_amd64_bin [ label = "build" ];
	dash_goreleaser -> darwin_amd64_bin [ label = "build" ];

	std_amd64_bin -> arm64_rpm [ label = "nfpm" ];
	std_amd64_bin -> amd64_rpm [ label = "nfpm" ];
	std_amd64_bin -> arm64_deb [ label = "nfpm" ];
	std_amd64_bin -> amd64_deb [ label = "nfpm" ];

	slim_amd64_bin -> tarball [ label = "archives" ];
	darwin_amd64_bin -> tarball [ label = "archives" ];

	arm64_rpm -> packagecloud [ label = "gha"] ;
	arm64_deb -> packagecloud [ label = "gha"];
	amd64_rpm -> packagecloud [ label = "gha"];
	amd64_deb -> packagecloud [ label = "gha"];

	arm64_deb -> std_arm64_image [ label = "docker" ];
	amd64_deb -> std_amd64_image [ label = "docker" ];
	slim_amd64_bin -> slim_amd64_image [ label = "docker" ];

	std_arm64_image -> dockerhub [ label = "manifests" ];
	std_amd64_image -> dockerhub [ label = "manifests" ];
	std_amd64_image -> cloudsmith [ label = "docker" ];
	slim_amd64_image -> dockerhub [ label = "docker" ];

	std_amd64_image -> ecr [ label = "gha" ];

	tarball -> github [ label = "release" ];

	amd64_rpm -> rhel_ami [ label = "packer" ];
	amd64_rpm -> al2_ami [ label = "packer" ];
    }

    subgraph tyk_pump {
	label = "Pump";
	pmp_goreleaser -> std_amd64_bin [ label = "build" fontname = "Noto Sans" ];
	pmp_goreleaser -> std_arm64_bin [ label = "build" ];
	pmp_goreleaser -> slim_amd64_bin [ label = "build" ];
	pmp_goreleaser -> darwin_amd64_bin [ label = "build" ];

	std_amd64_bin -> arm64_rpm [ label = "nfpm" ];
	std_amd64_bin -> amd64_rpm [ label = "nfpm" ];
	std_amd64_bin -> arm64_deb [ label = "nfpm" ];
	std_amd64_bin -> amd64_deb [ label = "nfpm" ];

	slim_amd64_bin -> tarball [ label = "archives" ];
	darwin_amd64_bin -> tarball [ label = "archives" ];

	arm64_rpm -> packagecloud [ label = "gha"] ;
	arm64_deb -> packagecloud [ label = "gha"];
	amd64_rpm -> packagecloud [ label = "gha"];
	amd64_deb -> packagecloud [ label = "gha"];

	arm64_deb -> std_arm64_image [ label = "docker" ];
	amd64_deb -> std_amd64_image [ label = "docker" ];
	slim_amd64_bin -> slim_amd64_image [ label = "docker" ];

	std_arm64_image -> dockerhub [ label = "manifests" ];
	std_amd64_image -> dockerhub [ label = "manifests" ];
	std_amd64_image -> cloudsmith [ label = "docker" ];
	slim_amd64_image -> dockerhub [ label = "docker" ];

	std_amd64_image -> ecr [ label = "gha" ];

	tarball -> github [ label = "release" ];

	amd64_rpm -> rhel_ami [ label = "packer" ];
	amd64_rpm -> al2_ami [ label = "packer" ];
    }

    subgraph tyk_sink {
	label = "MDCB";
	mdcb_goreleaser -> std_amd64_bin [ label = "build" fontname = "Noto Sans" ];
	mdcb_goreleaser -> std_arm64_bin [ label = "build" ];
	mdcb_goreleaser -> slim_amd64_bin [ label = "build" ];
	mdcb_goreleaser -> darwin_amd64_bin [ label = "build" ];

	std_amd64_bin -> arm64_rpm [ label = "nfpm" ];
	std_amd64_bin -> amd64_rpm [ label = "nfpm" ];
	std_amd64_bin -> arm64_deb [ label = "nfpm" ];
	std_amd64_bin -> amd64_deb [ label = "nfpm" ];

	slim_amd64_bin -> tarball [ label = "archives" ];
	darwin_amd64_bin -> tarball [ label = "archives" ];

	arm64_rpm -> packagecloud [ label = "gha"] ;
	arm64_deb -> packagecloud [ label = "gha"];
	amd64_rpm -> packagecloud [ label = "gha"];
	amd64_deb -> packagecloud [ label = "gha"];

	arm64_deb -> std_arm64_image [ label = "docker" ];
	amd64_deb -> std_amd64_image [ label = "docker" ];
	slim_amd64_bin -> slim_amd64_image [ label = "docker" ];

	std_arm64_image -> dockerhub [ label = "manifests" ];
	std_amd64_image -> dockerhub [ label = "manifests" ];
	std_amd64_image -> cloudsmith [ label = "docker" ];
	slim_amd64_image -> dockerhub [ label = "docker" ];

	std_amd64_image -> ecr [ label = "gha" ];

	tarball -> github [ label = "release" ];

	amd64_rpm -> rhel_ami [ label = "packer" ];
	amd64_rpm -> al2_ami [ label = "packer" ];
    }

    subgraph tyk_identity_broker {
	label = "TIB";
	tib_goreleaser -> std_amd64_bin [ label = "build" fontname = "Noto Sans" ];
	tib_goreleaser -> std_arm64_bin [ label = "build" ];
	tib_goreleaser -> slim_amd64_bin [ label = "build" ];
	tib_goreleaser -> darwin_amd64_bin [ label = "build" ];

	std_amd64_bin -> arm64_rpm [ label = "nfpm" ];
	std_amd64_bin -> amd64_rpm [ label = "nfpm" ];
	std_amd64_bin -> arm64_deb [ label = "nfpm" ];
	std_amd64_bin -> amd64_deb [ label = "nfpm" ];

	slim_amd64_bin -> tarball [ label = "archives" ];
	darwin_amd64_bin -> tarball [ label = "archives" ];

	arm64_rpm -> packagecloud [ label = "gha"] ;
	arm64_deb -> packagecloud [ label = "gha"];
	amd64_rpm -> packagecloud [ label = "gha"];
	amd64_deb -> packagecloud [ label = "gha"];

	arm64_deb -> std_arm64_image [ label = "docker" ];
	amd64_deb -> std_amd64_image [ label = "docker" ];
	slim_amd64_bin -> slim_amd64_image [ label = "docker" ];

	std_arm64_image -> dockerhub [ label = "manifests" ];
	std_amd64_image -> dockerhub [ label = "manifests" ];
	std_amd64_image -> cloudsmith [ label = "docker" ];
	slim_amd64_image -> dockerhub [ label = "docker" ];

	std_amd64_image -> ecr [ label = "gha" ];

	tarball -> github [ label = "release" ];

	amd64_rpm -> rhel_ami [ label = "packer" ];
	amd64_rpm -> al2_ami [ label = "packer" ];
    }
    
    subgraph raava {
	label = "Raava";
	raava_goreleaser -> std_amd64_bin [ label = "build" fontname = "Noto Sans" ];
	raava_goreleaser -> std_arm64_bin [ label = "build" ];
	raava_goreleaser -> slim_amd64_bin [ label = "build" ];
	raava_goreleaser -> darwin_amd64_bin [ label = "build" ];

	std_amd64_bin -> arm64_rpm [ label = "nfpm" ];
	std_amd64_bin -> amd64_rpm [ label = "nfpm" ];
	std_amd64_bin -> arm64_deb [ label = "nfpm" ];
	std_amd64_bin -> amd64_deb [ label = "nfpm" ];

	slim_amd64_bin -> tarball [ label = "archives" ];
	darwin_amd64_bin -> tarball [ label = "archives" ];

	arm64_rpm -> packagecloud [ label = "gha"] ;
	arm64_deb -> packagecloud [ label = "gha"];
	amd64_rpm -> packagecloud [ label = "gha"];
	amd64_deb -> packagecloud [ label = "gha"];

	arm64_deb -> std_arm64_image [ label = "docker" ];
	amd64_deb -> std_amd64_image [ label = "docker" ];
	slim_amd64_bin -> slim_amd64_image [ label = "docker" ];

	std_arm64_image -> dockerhub [ label = "manifests" ];
	std_amd64_image -> dockerhub [ label = "manifests" ];
	std_amd64_image -> cloudsmith [ label = "docker" ];
	slim_amd64_image -> dockerhub [ label = "docker" ];

	std_amd64_image -> ecr [ label = "gha" ];

	tarball -> github [ label = "release" ];

	amd64_rpm -> rhel_ami [ label = "packer" ];
	amd64_rpm -> al2_ami [ label = "packer" ];
    }

    templates -> gw_goreleaser;
    templates -> dash_goreleaser;
    templates -> pmp_goreleaser;
    templates -> mdcb_goreleaser;
    templates -> tib_goreleaser;
    templates -> raava_goreleaser;

}
